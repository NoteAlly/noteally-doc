"use strict";(self.webpackChunknotally_doc=self.webpackChunknotally_doc||[]).push([[280],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),f=o,h=p["".concat(l,".").concat(f)]||p[f]||d[f]||a;return n?r.createElement(h,i(i({ref:t},c),{},{components:n})):r.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},2318:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var r=n(7462),o=(n(7294),n(3905));const a={},i="Auth",s={unversionedId:"api/Auth",id:"api/Auth",title:"Auth",description:"In order to use most of the resources provided by the API, you need to be authenticated. To do so, you need to register an account and then login.",source:"@site/docs/api/Auth.md",sourceDirName:"api",slug:"/api/Auth",permalink:"/noteally-doc/docs/api/Auth",draft:!1,editUrl:"https://github.com/NoteAlly/docs/api/Auth.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"API",permalink:"/noteally-doc/docs/category/api"},next:{title:"Downloads",permalink:"/noteally-doc/docs/api/downloads"}},l={},u=[{value:"Login and Register",id:"login-and-register",level:2},{value:"Accessing private resources",id:"accessing-private-resources",level:2}],c={toc:u},p="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(p,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"auth"},"Auth"),(0,o.kt)("p",null,"In order to use most of the resources provided by the API, you need to be authenticated. To do so, you need to register an account and then login."),(0,o.kt)("p",null,"To facilitate and simplify the authentication process, the API is secured using AWS Cognito along with AWS API Gateway. This means that the API does not store any user credentials, and the authentication is entirely handled by AWS."),(0,o.kt)("h2",{id:"login-and-register"},"Login and Register"),(0,o.kt)("p",null,"To login or register, you just need to send a ",(0,o.kt)("inlineCode",{parentName:"p"},"POST")," request to the following endpoint."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-http"},"POST /login\n")),(0,o.kt)("p",null,"You need to pass as multipart form data the following fields:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id_token": "...",\n    "access_token": "..."\n}\n')),(0,o.kt)("p",null,"where ",(0,o.kt)("inlineCode",{parentName:"p"},"id_token")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token")," are the tokens provided by AWS Cognito after a successful login or registration."),(0,o.kt)("p",null,"Internally, the API will use the ",(0,o.kt)("inlineCode",{parentName:"p"},"access_token")," to get the user's general information from AWS Cognito. If the user does not exist in the database, it will be created."),(0,o.kt)("p",null,"After a successful login or registration, the API will return a ",(0,o.kt)("inlineCode",{parentName:"p"},"200")," status code along with the following response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id": 1,\n    "sub": "<cognito-sub>",\n    "id_token": "...",\n    "first_name": "<first-name>",\n    "last_name": "<last-name>",\n    "email": "<email>",\n    "premium": false,\n    "karma_score": 0,\n    "tutoring_services": false,\n    "profile_picture": null,\n    "registered": "False if the user was just registered, True otherwise"\n}\n')),(0,o.kt)("admonition",{title:"Note",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"This information is useful to use as session data in the frontend.")),(0,o.kt)("h2",{id:"accessing-private-resources"},"Accessing private resources"),(0,o.kt)("p",null,"To access protected resources, you need to send the ",(0,o.kt)("inlineCode",{parentName:"p"},"id_token")," in the header of the request using the key ",(0,o.kt)("inlineCode",{parentName:"p"},"Authorization"),". The AWS API Gateway will validate the token and forward the request to the API if the token is valid."))}d.isMDXComponent=!0}}]);